name: Debug demo view development
on:
  workflow_dispatch:
jobs:
  
  debug:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - uses: pnpm/action-setup@v4
        with:
            version: latest
      - name: Turbo Create
        run: |
          cd demos/playwright-electron/pwe-a-monorepo/
          pnpm install
          pnpm run build
          cd apps
          rm -fr pwe-a/build
          cp -r web/build pwe-a/build
          cd pwe-a
          chmod +x run.sh
      - name: Playwright Test
        uses: GabrielBB/xvfb-action@v1
        with: 
          run: demos/playwright-electron/pwe-a-monorepo/apps/pwe-a/run.sh
      - name: Upload artifact
        uses: actions/upload-artifact@v2
        with:
            # download auto zip
            name: debug
            path: demos/playwright-electron/pwe-a-monorepo/apps/pwe-a/screenshot.png

